!function(e){const t=function(){e.ajax({url:"",data:{"lp-ajax":"toggle_item_preview",item_id:this.value,previewable:this.checked?"yes":"no",nonce:e(this).attr("data-nonce")},dataType:"text",success:function(e){e=LP.parseJSON(e)}})},n=function(t){const n=e(this).addClass("disabled");t.preventDefault(),e.post({url:n.attr("href"),data:{"lp-ajax":"create-pages"},dataType:"text",success:function(e){const t=n.closest(".lp-notice").html("<p>"+e+"</p>");setTimeout((function(){t.fadeOut()}),2e3)}})},a=function(t){t.preventDefault();e(this).closest(".lp-upgrade-notice").fadeOut(),e.post({url:"",data:{"lp-hide-upgrade-message":"yes"},success:function(e){}})},o=function(t){if(e(t.target).hasClass("buy-now"))return;t.preventDefault();const n=e(this).closest(".plugin-card");e(this).hasClass("updating-message")||(e(this).addClass("updating-message button-working disabled"),e.ajax({url:e(this).attr("href"),data:{},success:function(t){e.ajax({url:window.location.href,success:function(t){const a=e(t).find("#"+n.attr("id"));a.length?n.replaceWith(a):n.find(".plugin-action-buttons a").removeClass("updating-message button-working").html(learn_press_admin_localize.plugin_installed)}})}}))},s=function(e){return e.preventDefault(),!1};e.fn._filter_post_by_author=function(){const t=e("#post-search-input");if(!t.length)return;const n=e(t[0].form),a=e('<select name="author" id="author"></select>').insertAfter(t).select2({ajax:{url:window.location.href+"&lp-ajax=search-authors",dataType:"json",s:""},placeholder:"Search by user",minimumInputLength:3,allowClear:!0}).on("select2:select",(function(){e('input[name="author"]').val(a.val())}));n.on("submit",(function(){window.location.href.removeQueryVar("author").addQueryVar("author",a.val())}))};const c=()=>{e(".lp-button-upgrade").each((function(){e(this).on("click",(function(t){t.preventDefault(),e("#lp-update-db-modal").removeClass("lp-update-db-modal__hidden")}))})),e(".lp-update-db-modal__button").on("click",(function(t){t.preventDefault();const n=e(this),a=n.text(),o=n.data("loading"),s=e(".lp-update-db-modal__content-text").data("text");n.addClass("loading"),n.text(o);const c=()=>{e.ajax({url:lpGlobalSettings.ajax+"?action=lp_update_database",method:"GET",success(t){if("success"===t.status)return n.text(a),e(".lp-update-db-modal__content").addClass("lp-update-db-modal__success"),e(".lp-update-db-modal__content-text > h3").text(s),n.removeClass("loading"),!1;c()}})};c()}));e(".lp-update-db-modal__cancel").on("click",(function(t){t.preventDefault(),e("#lp-update-db-modal").addClass("lp-update-db-modal__hidden")}))};e(document).ready((function(){if(c(),e(".learn-press-dropdown-pages").LP("DropdownPages"),e(".learn-press-advertisement-slider").LP("Advertisement","a","s").appendTo(e("#wpbody-content")),e(".learn-press-toggle-item-preview").on("change",t),e(".learn-press-tip").LP("QuickTip"),e(document).on("click","#learn-press-create-pages",n).on("click",".lp-upgrade-notice .close-notice",a).on("click",".plugin-action-buttons a",o).on("click","[data-remove-confirm]",s).on("mousedown",".lp-sortable-handle",(function(t){e("html, body").addClass("lp-item-moving"),e(t.target).closest(".lp-sortable-handle").css("cursor","inherit")})).on("mouseup",(function(t){e("html, body").removeClass("lp-item-moving"),e(".lp-sortable-handle").css("cursor","")})),e("#order-export__section").length){document.querySelectorAll(".tabs");const t=document.querySelectorAll(".tab"),n=document.querySelectorAll(".panel");function l(e){for(let e=0;e<t.length;e++)t[e].classList.remove("active");for(let e=0;e<n.length;e++)n[e].classList.remove("active");e.target.classList.add("active");const a=e.target.getAttribute("data-target");document.getElementById("panels").getElementsByClassName(a)[0].classList.add("active")}for(let e=0;e<t.length;e++)t[e].addEventListener("click",l,!1);const a=document.getElementById("myModal"),o=document.getElementById("order-export__button"),s=document.getElementsByClassName("close")[0];o.onclick=function(){a.style.display="block"},s.onclick=function(){a.style.display="none"},window.onclick=function(e){e.target==a&&(a.style.display="none")},e("#lp-invoice__content").length&&e("#lp-invoice__export").click((function(){const t=new jsPDF("p","pt","letter"),n={"#bypassme":(e,t)=>!0},a={top:80,bottom:60,left:40,width:522};t.fromHTML(e("#lp-invoice__content")[0],a.left,a.top,{width:a.width,elementHandlers:n},(function(e){const n=t.output("blob");window.open(URL.createObjectURL(n))}),a)})),e("#lp-invoice__update").click((function(){let t=e(this).data("id"),n=e('input[name="site_title"]'),a=e('input[name="order_date"]'),o=e('input[name="invoice_no"]'),s=e('input[name="order_customer"]'),c=e('input[name="order_email"]'),l=e('input[name="order_payment"]');n=n.is(":checked")?"check":"uncheck",a=a.is(":checked")?"check":"uncheck",o=o.is(":checked")?"check":"uncheck",s=s.is(":checked")?"check":"uncheck",c=c.is(":checked")?"check":"uncheck",l=l.is(":checked")?"check":"uncheck",e.ajax({type:"post",dataType:"html",url:"admin-ajax.php",data:{site_title:n,order_date:a,invoice_no:o,order_customer:s,order_email:c,order_id:t,order_payment:l,action:"learnpress_update_order_exports"},beforeSend(){e(".export-options__loading").addClass("active")},success(t){e("#lp-invoice__content").html(""),e("#lp-invoice__content").append(t),e(".export-options__loading").removeClass("active"),e(".options-tab").removeClass("active"),e(".preview-tab").addClass("active"),e("#panels .export-options").removeClass("active"),e("#panels .pdf-preview").addClass("active")},error(e,t,n){console.log("The following error occured: "+t,n)}})}))}e.fn._filter_post_by_author()}))}(jQuery);