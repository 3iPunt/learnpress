!function(e){const t=e(document);let n=!1;const l=function(t){t.preventDefault();const l=e(this);n||confirm(lpGlobalSettings.i18n.confirm_install_sample_data)&&(l.addClass("disabled").html(l.data("installing-text")),e(".lp-install-sample__response").remove(),n=!0,e.ajax({url:l.attr("href"),data:e(".lp-install-sample__options").serializeJSON(),success(t){l.removeClass("disabled").html(l.data("text")),n=!1,e(t).insertBefore(l.parent())},error(){l.removeClass("disabled").html(l.data("text")),n=!1,e(response).insertBefore(l.parent())}}))},a=function(t){t.preventDefault();const l=e(this);n||confirm(lpGlobalSettings.i18n.confirm_uninstall_sample_data)&&(l.addClass("disabled").html(l.data("uninstalling-text")),n=!0,e.ajax({url:l.attr("href"),success(t){l.removeClass("disabled").html(l.data("text")),n=!1,e(t).insertBefore(l.parent())},error(){l.removeClass("disabled").html(l.data("text")),n=!1,e(response).insertBefore(l.parent())}}))},s=function(t){t.preventDefault();const n=e(this);n.hasClass("disabled")||(n.addClass("disabled").html(n.data("cleaning-text")),e.ajax({url:n.attr("href"),data:{},success(e){n.removeClass("disabled").html(n.data("text"))},error(){n.removeClass("disabled").html(n.data("text"))}}))},i=function(){e.ajax({url:"admin.php?page=lp-toggle-hard-cache-option",data:{v:this.checked?"yes":"no"},success(e){},error(){}})},o=function(t){t.preventDefault(),e(".lp-install-sample__options").toggleClass("hide-if-js")};let r;const c={elMainContent:null,elTitle:null,elBtnYes:null,elBtnNo:null,elCalledModal:null,callBackYes:null,init(){const t=this;this.elMainContent=r.find(".main-content"),this.elTitle=r.find(".modal-title"),this.elBtnYes=r.find(".btn-yes"),this.elBtnNo=r.find(".btn-no"),e(document).on("click",".close, .btn-no",(function(){r.hide()})),e(document).on("click",".btn-yes",(function(){t.callBackYes()}))},setElCalledModal(e){this.elCalledModal=e},setContentModal(e,t){this.elMainContent.html(e),"function"==typeof t&&t()},setTitleModal(e){this.elTitle.html(e)}},d=function(e,t,n){wp.apiFetch({path:e,method:"POST",data:t}).then(e=>{"function"==typeof n.success&&n.success(e)}).catch(e=>{"function"==typeof n.error&&n.error(e)}).then(()=>{"function"==typeof n.completed&&n.completed()})};e((function(){r=e(".lp-overlay"),function(){const t=window.location.search;if("upgrade-db"===new URLSearchParams(t).get("action")){const t=e("#lp-tool-upgrade-db");if(!t.length)return;c.init(),c.setContentModal(t.find(".lp-wrapper-status-upgrade").html(),(function(){e(document).on("click",".lp-item-step",(function(t){const n=e(t.target).find("input");n.attr("checked")?n.attr("checked",!1):n.attr("checked",!0)}))})),c.setTitleModal(t.find("h2").text()),c.elBtnYes.text("Upgrade"),c.callBackYes=function(){const t=r.find(".lp-group-step"),n=r.find(".lp-item-step"),l=[];e.each(r.find("input[name='lp_steps_upgrade_db[]']"),(function(t,n){e(n).prop("checked")&&l.push(e(n).val())}));const a={steps:l,step:l[0]},s=(e,n)=>{elItemStepCurrent=t.find("input[value="+e+"]").closest(".lp-item-step"),elItemStepCurrent.addClass("running"),100===n&&elItemStepCurrent.removeClass("running").addClass("completed"),console.log(123123),elItemStepCurrent.find(".progress-bar").css("width",n+"%"),elItemStepCurrent.find(".percent").text(n+"%")};n.find("input").attr("disabled","disabled"),s(l[0],.1);const i={success:e=>{s(a.step,e.percent),a.step!==e.name&&s(e.name,1),"success"===e.status?(a.step=e.name,a.data=e.data,setTimeout(()=>{d("/lp/v1/database/upgrade",a,i)},800)):"finished"===e.status?elItemStepCurrent.removeClass("running").addClass("completed"):elItemStepCurrent.removeClass("running").addClass("error")},error:e=>{console.log(e)},completed:()=>{}};d("/lp/v1/database/upgrade",a,i)},e(".lp-overlay").css("display","block")}}(),t.on("click",".lp-install-sample__install",l).on("click",".lp-install-sample__uninstall",a).on("click","#learn-press-clear-cache",s).on("click",'input[name="enable_hard_cache"]',i).on("click",".lp-install-sample__toggle-options",o)}))}(jQuery);