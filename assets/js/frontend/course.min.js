!function(t){"use strict";function e(t){const e=window.localStorage;this.key=t,this.get=function(t){const n=(e.getItem(this.key)||"").split(",");if(t){t+="";const e=n.indexOf(t);if(e>=0)return n[e]}return n},this.set=function(t){return"string"!=typeof t&&(t=t.join(",")),e.setItem(this.key,t),t.split(",")},this.hasSection=function(t){t+="";const e=this.get().indexOf(t);return e>=0&&e},this.add=function(t){t+="";const e=this.get();if(!this.hasSection(t))return e.push(t),this.set(e),e},this.remove=function(t){t+="";const e=this.hasSection(t);if(!1!==e){const t=this.get();return t.splice(e,1),this.set(t),t}return!1}}function n(n){const o=t(".lp-overlay"),i=t("form[name=learn-press-form-complete-lesson]");let s,c,l=new e("sections"),a=t("body"),r=t(".content-item-scrollable"),u=t("#learn-press-course-curriculum"),d=t("#learn-press-content-item"),f=u.find(".curriculum-scrollable"),h=t("#course-item-content-header"),m=t("#course-item-content-footer"),p=u.find(".course-item"),g=!0,w=0,y=!1;function b(e){let n,o=t(e.target);o.is("input.option-check")||(n=o.closest(".answer-option").find("input.option-check"),n.length&&(n.is(":disabled")||(n.is(":checkbox")?n[0].checked=!n[0].checked:n[0].checked=!0)))}function v(){const e=t(this).closest(".section").data("section-id");t(this).siblings(".section-content").slideToggle((function(){t(this).is(":visible")?l.remove(e):l.add(e)}))}function k(e,n){if(t(document.body).hasClass("course-item-popup"))return;const o=t(n);0!==o.closest(".course-nav").siblings().length&&LP.setUrl(o.attr("href"))}function C(e){if("keypress"===e.type&&13===e.keyCode)return!1;const n=this.value,o=new RegExp(n,"ig");p.map((function(){const e=t(this);e.find(".item-name").text().match(o)||!n.length?e.show():e.hide()})),t(".section").show().each((function(){n.length?t(this).find(".section-content").children(":visible").length?t(this).show():t(this).hide():t(this).show()})),t(this).closest(".course-item-search").toggleClass("has-keyword",!!this.value.length)}function M(e){t(this).closest(".course-item-search").find("input").val("").trigger("keyup")}function T(){t("#qm").css({"z-index":999999999,position:"relative"}),t("html, body").css("overflow","auto")}function x(){return u.outerWidth()}function O(t){}function S(e){t(document)[e?"off":"on"]("mousemove.maybe-show-curriculum","body",O)}function I(){c&&clearTimeout(c),c=setTimeout((function(){const e=x();s&&(u.stop().animate({left:-e}),d.stop().animate({left:0}),m.stop().animate({left:0},(function(){t(document,window).trigger("learn-press/toggle-content-item")})),h.find(".course-item-search").hide(),g=!1,S())}),3e3)}function L(e){e.preventDefault();const n=x();s=a.toggleClass("full-screen-content-item").hasClass("full-screen-content-item"),u.stop().animate({left:s?-n:0}),d.stop().animate({left:s?0:n}),m.stop().animate({left:s?0:n},(function(){t(document,window).trigger("learn-press/toggle-content-item")})),g=!s,window.localStorage&&window.localStorage.setItem("lp-full-screen",s?"yes":"no"),s&&S(),h.find(".course-title").stop().animate({marginLeft:s?-n:0}),h.find(".course-item-search").stop().animate({opacity:s?0:1})}function q(){t(document).on("learn-press/nav-tabs/clicked",k).on("keyup keypress",".course-item-search input",C).on("click",".course-item-search button",M).on("click","#wp-admin-bar-query-monitor",T).on("click",".answer-options .answer-option",b).on("click",".section-header",v).on("submit","form.lp-form",(function(){!function(e){const n=t(".answer-options"),o=t(e),i=n.serializeJSON(),s=t('<input type="hidden" name="question-data" />').val(JSON.stringify(i));if("post"===(o.attr("method")+"").toLowerCase())o.find('input[name="question-data"]').remove(),o.append(s).append(t("<div />").append(n.clone()).hide())}(this)})).on("click",".toggle-content-item",L),u.hover((function(){c&&clearTimeout(c)}),(function(){s&&I()}))}this.completeItemsCourse=function(){const e=this;t(document).on("click",".lp-btn-complete-item",(function(n){n.preventDefault();const s=t(this).closest("form");e.lpModalOverlay.setElCalledModal(s),e.lpModalOverlay.callBackYes=function(){i.submit()},o.show()}))},this.lpModalOverlay={elMessage:null,elTitle:null,callBackYes:null,elCalledModal:null,init(){const e=this;this.elMessage=o.find(".message"),this.elTitle=o.find(".modal-title"),t(document).on("click",".close, .btn-no",(function(){o.hide()})),t(document).on("click",".btn-yes",(function(){e.callBackYes()}))},setElCalledModal(t){this.elCalledModal=t,this.setContentModal()},setContentModal(){this.elTitle.text(this.elCalledModal.data("title")),this.elMessage.text(this.elCalledModal.data("confirm"))}},this.finishCourse=function(){const e=this,n=t(".form-button-finish-course");if(!n)return;n.find(".lp-btn-finish-course").on("click",(function(t){t.preventDefault(),e.lpModalOverlay.setElCalledModal(n),e.lpModalOverlay.callBackYes=function(){n.submit()},o.show()}))},function(){if(y=a.hasClass("course-item-popup"),function(){let e=t(".course-item.current").closest(".section"),n=t(".curriculum-sections").find(".section"),o=e.data("section-id"),i=[];i=e?l.remove(o):l.get();for(let t=0;t<i.length;t++)n.filter('[data-section-id="'+i[t]+'"]').find(".section-content").hide()}(),q(),y){if(d.appendTo(a),u.appendTo(a),t("#wpadminbar").length&&(a.addClass("wpadminbar"),w=32),r.addClass("scrollbar-light").scrollbar({scrollx:!1}),r.parent().css({position:"absolute",top:0,bottom:t("#course-item-content-footer:visible").outerHeight()||0,width:"100%"}).css("opacity",1).end().css("opacity",1),f.addClass("scrollbar-light").scrollbar({scrollx:!1}),f.parent().css({position:"absolute",top:0,bottom:0,width:"100%"}).css("opacity",1).end().css("opacity",1),function(){const e=t(".content-item-summary.content-item-video");if(!e.length)return;let n,o,i=e.find(".entry-video"),s=i.find("iframe"),c=s.attr("width"),l=s.attr("height"),a=1;function r(){const t=s.width();n=t*a,s.css({height:n,marginLeft:(i.width()-t)/2}),e.css({paddingTop:n})}if(!i.length)return!1;c&&l&&-1===c.indexOf("%")&&-1===l.indexOf("%")&&(a=l/c),t(window).on("resize.fit-content-video learn-press/toggle-content-item",(function(){o&&clearTimeout(o),o=setTimeout(r,250)})).trigger("resize.fit-content-video"),t(".content-item-scrollable").scroll((function(){t(this).find(".entry-video").css("padding-top",this.scrollTop)}))}(),s=window.localStorage&&"yes"===window.localStorage.getItem("lp-full-screen"),t(window).width()<=768&&(s=!0),s){const t=x();a.addClass("full-screen-content-item"),d.css("left",0),u.css("left",-t),m.css("left",0),g=!s,h.find(".course-title").css({marginLeft:s?-t:0}),h.find(".course-item-search").css({opacity:s?0:1}),S()}setTimeout((function(){const e=a.find(".curriculum-sections").parent();e.scrollTo(e.find(".course-item.current"),100),window.location.hash&&t(".content-item-scrollable:last").scrollTo(t(window.location.hash))}),300),a.css("opacity",1)}}()}t((function(){const e=new n({});e.lpModalOverlay.init(),e.completeItemsCourse(),e.finishCourse(),t(this).on("submit",'form[name="course-external-link"]',(function(){const e=t(this).attr("action");if(e)return window.location.href=e,!1}));const o=t(".course-item-is-blocked"),i=o.val();o.length&&i<2147483647&&setTimeout((function(){window.location.reload(!0)}),i)}))}(jQuery);