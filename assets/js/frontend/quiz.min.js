this.LP=this.LP||{},this.LP.quiz=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=17)}([function(e,t){!function(){e.exports=this.wp.data}()},function(e,t){!function(){e.exports=this.wp.i18n}()},function(e,t){!function(){e.exports=this.wp.element}()},function(e,t){!function(){e.exports=this.wp.compose}()},function(e,t){!function(){e.exports=this.LP.dataControls}()},function(e,t,n){"use strict";e.exports=function(e){var t,n={};return function e(t,n){var r;if(Array.isArray(n))for(r=0;r<n.length;r++)e(t,n[r]);else for(r in n)t[r]=(t[r]||[]).concat(n[r])}(n,e),(t=function(e){return function(t){return function(r){var o,i,u=n[r.type],a=t(r);if(u)for(o=0;o<u.length;o++)(i=u[o](r,e))&&e.dispatch(i);return a}}}).effects=n,t}},,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"setQuizData",(function(){return St})),n.d(r,"setCurrentQuestion",(function(){return qt})),n.d(r,"setCurrentPage",(function(){return Qt})),n.d(r,"__requestBeforeStartQuiz",(function(){return kt})),n.d(r,"__requestStartQuizSuccess",(function(){return zt})),n.d(r,"startQuiz",(function(){return Tt})),n.d(r,"__requestSubmitQuiz",(function(){return Ct})),n.d(r,"__requestSubmitQuizSuccess",(function(){return Dt})),n.d(r,"submitQuiz",(function(){return It})),n.d(r,"updateUserQuestionAnswers",(function(){return Nt})),n.d(r,"__requestShowHintSuccess",(function(){return xt})),n.d(r,"showHint",(function(){return At})),n.d(r,"__requestCheckAnswerSuccess",(function(){return Mt})),n.d(r,"checkAnswer",(function(){return Ut})),n.d(r,"markQuestionRendered",(function(){return Lt})),n.d(r,"setQuizMode",(function(){return Ft}));var o={};n.r(o),n.d(o,"getQuestionOptions",(function(){return Zt})),n.d(o,"getItemStatus",(function(){return Jt})),n.d(o,"getProp",(function(){return Gt})),n.d(o,"getQuizAttempts",(function(){return Kt})),n.d(o,"getQuizAnswered",(function(){return $t})),n.d(o,"getQuestions",(function(){return Vt})),n.d(o,"getData",(function(){return Yt})),n.d(o,"getDefaultRestArgs",(function(){return Xt})),n.d(o,"getQuestionAnswered",(function(){return en})),n.d(o,"getCurrentQuestion",(function(){return tn})),n.d(o,"getQuestion",(function(){return nn})),n.d(o,"isCheckedAnswer",(function(){return rn})),n.d(o,"isCorrect",(function(){return on})),n.d(o,"getQuestionsSelectedAnswers",(function(){return un})),n.d(o,"getUserMark",(function(){return an}));var i=n(2),u=n(3),a=n(0);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}i.Component;function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,y(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.content;return React.createElement("div",{className:"quiz-content",dangerouslySetInnerHTML:{__html:e}})}}])&&b(n.prototype,r),o&&b(n,o),t}(i.Component),v=Object(u.compose)([Object(a.withSelect)((function(e){return{content:(0,e("learnpress/quiz").getData)("content")}})),Object(a.withDispatch)((function(e){var t=e("learnpress/quiz");return{setQuizData:t.setQuizData,startQuiz:t.startQuiz}}))])(g),O=n(1);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var E=LP.Hook,S=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),j(this,P(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.metaFields;return e&&React.createElement(React.Fragment,null,React.createElement("ul",{className:"quiz-intro"},Object.values(e).map((function(e,t){return React.createElement("li",{key:"quiz-intro-field-".concat(t)},React.createElement("label",{dangerouslySetInnerHTML:{__html:e.title}}),React.createElement("span",{dangerouslySetInnerHTML:{__html:e.content}}))}))))}}])&&_(n.prototype,r),o&&_(n,o),t}(i.Component),q=Object(u.compose)(Object(a.withSelect)((function(e){var t,n=e("learnpress/quiz").getData,r=LP.singleCourse;return{metaFields:E.applyFilters("quiz-meta-fields",{duration:{title:Object(O.__)("Duration","learnpress"),content:r.formatDuration(n("duration"))},passingGrade:{title:Object(O.__)("Passing grade","learnpress"),content:n("passingGrade")},questionsCount:{title:Object(O.__)("Questions","learnpress"),content:(t=n("questionIds"),t?t.length:0)}})}})))(S);function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var D=function(e){function t(){var e,n,r,o,i,u,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];return r=this,o=(e=z(t)).call.apply(e,[this].concat(c)),n=!o||"object"!==Q(o)&&"function"!=typeof o?T(r):o,i=T(n),a=function(){var e=n.props;(0,e.checkAnswer)(e.question.id)},(u="checkAnswer")in i?Object.defineProperty(i,u,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[u]=a,n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.answered;return React.createElement("button",{className:"lp-button instant-check",onClick:this.checkAnswer,disabled:!e},Object(O._x)("Check answer","label of button check answer","learnpress"))}}])&&k(n.prototype,r),o&&k(n,o),t}(i.Component),I=Object(u.compose)(Object(a.withSelect)((function(e,t){var n=t.question.id;return{answered:(0,e("learnpress/quiz").getQuestionAnswered)(n)}})),Object(a.withDispatch)((function(e,t){t.id;var n=e("learnpress/quiz").checkAnswer;return{checkAnswer:function(e){n(e)}}})))(D);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var L=function(e){function t(){var e,n,r,o,i,u,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];return r=this,o=(e=A(t)).call.apply(e,[this].concat(c)),n=!o||"object"!==N(o)&&"function"!=typeof o?M(r):o,i=M(n),a=function(){var e=n.props,t=e.showHint,r=e.question;t(r.id,!r.showHint)},(u="showHint")in i?Object.defineProperty(i,u,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[u]=a,n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return this.props.question.hint?React.createElement("button",{className:"btn-show-hint",onClick:this.showHint}):""}}])&&x(n.prototype,r),o&&x(n,o),t}(i.Component),F=Object(u.compose)(Object(a.withDispatch)((function(e,t){t.id;var n=e("learnpress/quiz").showHint;return{showHint:function(e,t){n(e,t)}}})))(L);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var K=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,u=new Array(i),s=0;s<i;s++)u[s]=arguments[s];return r=this,o=(e=W(t)).call.apply(e,[this].concat(u)),n=!o||"object"!==H(o)&&"function"!=typeof o?Z(r):o,G(Z(n),"startQuiz",(function(e){e&&e.preventDefault();var t=n.props,r=t.startQuiz;if("completed"===t.status&&"no"===(0,Object(a.select)("learnpress/modal").confirm)("Are you sure you want to retry quiz?",n.startQuiz))return;r()})),G(Z(n),"nav",(function(e){return function(t){var r=n.props,o=r.questionNav,i=r.currentPage,u=r.numPages,a=r.setCurrentPage;switch(e){case"prev":i=i>1?i-1:"infinity"===o?u:1;break;default:i=i<u?i+1:"infinity"===o?1:u}a(i)}})),G(Z(n),"moveTo",(function(e){return function(t){t.preventDefault();var r=n.props,o=r.numPages,i=r.setCurrentPage;e<1||e>o||i(e)}})),G(Z(n),"isLast",(function(){var e=n.props;return e.currentPage===e.numPages})),G(Z(n),"isFirst",(function(){return 1===n.props.currentPage})),G(Z(n),"submit",(function(){(0,n.props.submitQuiz)()})),G(Z(n),"setQuizMode",(function(e){return function(){(0,n.props.setQuizMode)(e)}})),G(Z(n),"isReviewing",(function(){return n.props.isReviewing})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props,n=t.status,r=t.questionNav,o=t.isReviewing,i=t.showReview,u=t.numPages,a=t.question,s=t.questionsPerPage,c=t.pageNumbers,l=t.pages,f=t.currentPage,p=["quiz-buttons align-center"];return"questionNav"===r&&p.push("infinity"),this.isFirst()&&p.push("is-first"),this.isLast()&&p.push("is-last"),React.createElement("div",{className:p.join(" ")},React.createElement("div",{className:"button-left"+("started"===n?" fixed":"")},-1!==["","completed"].indexOf(n)&&!o&&React.createElement("button",{className:"lp-button start",onClick:this.startQuiz},"completed"===n?Object(O._x)("Retry","label button retry quiz","learnpress"):Object(O._x)("Start","label button start quiz","learnpress")),("started"===n||o)&&u>1&&React.createElement(React.Fragment,null,c?React.createElement(React.Fragment,null,React.createElement("div",{className:"questions-pagination"},React.createElement("div",{className:"page-numbers"},l.map((function(t,n){return n+1===f?React.createElement("span",{key:"page-number-".concat(n)},n+1):React.createElement("a",{key:"page-number-".concat(n),onClick:e.moveTo(n+1)},n+1)}))))):React.createElement(React.Fragment,null,React.createElement("button",{className:"lp-button nav prev","data-type":"question-nav",onClick:this.nav("prev")},Object(O.__)("","learnpress")),React.createElement("button",{className:"lp-button nav next","data-type":"question-nav",onClick:this.nav("next")},Object(O.__)("","learnpress"))))),React.createElement("div",{className:"button-right"},"started"===n&&React.createElement(React.Fragment,null,1===s&&[React.createElement($,{key:"button-hint",type:"hint",Button:F,question:a}),React.createElement($,{key:"button-check",type:"check",Button:I,question:a})],("infinity"===r||this.isLast())&&!o&&React.createElement("button",{className:"lp-button submit-quiz",onClick:this.submit},Object(O.__)("Submit","learnpress"))),o&&i&&React.createElement("button",{className:"lp-button back-quiz",onClick:this.setQuizMode("")},Object(O.__)("Result","learnpress")),"completed"===n&&i&&!o&&React.createElement("button",{className:"lp-button review-quiz",onClick:this.setQuizMode("reviewing")},Object(O.__)("Review","learnpress"))))}}])&&B(n.prototype,r),o&&B(n,o),t}(i.Component),$=Object(u.compose)(Object(a.withSelect)((function(e){var t=e("learnpress/quiz").getData;return{status:t("status"),showCheck:t("instantCheck"),checkedQuestions:t("checkedQuestions"),hintedQuestions:t("hintedQuestions"),questionsPerPage:t("questionsPerPage")}})))((function(e){var t=e.showCheck,n=e.checkedQuestions,r=e.hintedQuestions,o=e.question,i=e.status,u=e.type,a=e.Button;if("started"!==i)return!1;var s=React.createElement(a,{question:o});switch(u){case"hint":return r?!!o.hasHint&&(-1===r.indexOf(o.id)&&s):s;case"check":return!!t&&(n?-1===n.indexOf(o.id)&&s:s)}})),V=Object(u.compose)([Object(a.withSelect)((function(e){var t=e("learnpress/quiz"),n=t.getData,r=t.getCurrentQuestion,o={id:n("id"),status:n("status"),questionIds:n("questionIds"),questionNav:n("questionNav"),isReviewing:n("reviewQuestions")&&"reviewing"===n("mode"),showReview:n("reviewQuestions"),showCheck:n("instantCheck"),checkedQuestions:n("checkedQuestions"),hintedQuestions:n("hintedQuestions"),numPages:n("numPages"),pages:n("pages"),currentPage:n("currentPage"),questionsPerPage:n("questionsPerPage"),pageNumbers:n("pageNumbers")};return 1===o.questionsPerPage&&(o.question=r("object")),o})),Object(a.withDispatch)((function(e,t){t.id;var n=e("learnpress/quiz"),r=n.startQuiz,o=n.setCurrentQuestion,i=n.submitQuiz,u=n.setQuizMode,a=n.showHint,s=n.checkAnswer;return{startQuiz:r,setCurrentQuestion:o,setQuizMode:u,setCurrentPage:n.setCurrentPage,submitQuiz:function(e){i(e)},showHint:function(e){a(e)},checkAnswer:function(e){s(e)}}}))])(K),Y=function(e){var t=e.question,n={"instant-check":function(){return React.createElement($,{type:"check",Button:I,question:t})},hint:function(){return React.createElement($,{type:"hint",Button:F,question:t})}};return React.createElement(React.Fragment,null,LP.config.questionFooterButtons().map((function(e){return React.createElement(React.Fragment,{key:"button-".concat(e)},n[e]&&n[e]())})))};function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ue=window.jQuery,ae=lodash,se=(ae.uniqueId,ae.isArray),ce=(ae.isNumber,ae.bind,function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=ne(t).apply(this,arguments),e=!r||"object"!==X(r)&&"function"!=typeof r?re(n):r,ie(re(e),"setRef",(function(t){e.$wrap=ue(t)})),ie(re(e),"parseOptions",(function(e){return e&&(e=se(e)?e:JSON.parse(CryptoJS.AES.decrypt(e.data,e.key,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),e=se(e)?e:JSON.parse(e)),e||[]})),ie(re(e),"getWrapperClass",(function(){var t=e.props,n=t.question,r=(t.answered,["question","question-"+n.type]),o=e.parseOptions(n.options);return o.length&&void 0!==o[0].isTrue&&r.push("question-answered"),r})),ie(re(e),"getEditLink",(function(){var t=e.props,n=t.question,r=t.editPermalink;return r?r.replace(/[0-9]+/,n.id):""})),ie(re(e),"editPermalink",(function(e){return Object(O.sprintf)('<a href="%s">%s</a>',e,Object(O.__)("Edit","learnpress"))})),e.state={time:null,showHint:!1},e.$wrap=null,e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(e){var t=this.props,n=t.question,r=t.isCurrent,o=t.markQuestionRendered;return r&&o(n.id),this.state.time||this.setState({time:new Date}),e}},{key:"render",value:function(){var e=this,t=this.props,n=t.question,r=t.isShow,o=t.isShowIndex,i=(t.isShowHint,t.status),u=LP.questionTypes.default,a=this.getEditLink();a&&jQuery("#wp-admin-bar-edit-lp_question").find(".ab-item").attr("href",a);var s={index:function(){return o?React.createElement("span",{className:"question-index"},o,"."):""},title:function(){return n.title},hint:function(){return React.createElement(F,{question:n})},"edit-permalink":function(){return a&&React.createElement("span",{dangerouslySetInnerHTML:{__html:e.editPermalink(a)},className:"edit-link"})}},c={title:function(){return React.createElement("h4",{className:"question-title"},LP.config.questionTitleParts().map((function(e){return React.createElement(React.Fragment,{key:"title-part-".concat(e)},s[e]&&s[e]())})))},content:function(){return React.createElement("div",{className:"question-content",dangerouslySetInnerHTML:{__html:n.content}})},"answer-options":function(){return e.$wrap&&React.createElement(u,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(n,!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.props,{$wrap:e.$wrap}))},explanation:function(){return n.explanation&&React.createElement(React.Fragment,null,React.createElement("div",{className:"question-explanation-content"},React.createElement("strong",{className:"explanation-title"},Object(O.__)("Explanation:","learnpress")),React.createElement("div",{dangerouslySetInnerHTML:{__html:n.explanation}})))},hint:function(){return n.hint&&!n.explanation&&n.showHint&&React.createElement(React.Fragment,null,React.createElement("div",{className:"question-hint-content"},React.createElement("strong",{className:"hint-title"},Object(O.__)("Hint:","learnpress")),React.createElement("div",{dangerouslySetInnerHTML:{__html:n.hint}})))},buttons:function(){return"started"===i&&React.createElement(Y,{question:n})}},l=LP.config.questionBlocks();return React.createElement(React.Fragment,null,React.createElement("div",{className:this.getWrapperClass().join(" "),style:{display:r?"":"none"},"data-id":n.id,ref:this.setRef},l.map((function(e){return React.createElement(React.Fragment,{key:"block-".concat(e)},c[e]?c[e]():"")}))))}}])&&te(n.prototype,r),o&&te(n,o),t}(i.Component)),le=Object(u.compose)([Object(a.withSelect)((function(e,t){var n=t.question.id,r=e("learnpress/quiz"),o=r.getData,i=r.getQuestionAnswered;return{status:o("status"),questions:o("question"),answered:i(n),questionsRendered:o("questionsRendered"),editPermalink:o("editPermalink"),numPages:o("numPages")}})),Object(a.withDispatch)((function(e){var t=e("learnpress/quiz"),n=t.updateUserQuestionAnswers;return{markQuestionRendered:t.markQuestionRendered,updateUserQuestionAnswers:n}}))])(ce);function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var he=lodash,ge=(he.isNumber,he.chunk,function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=me(t).apply(this,arguments),n=!o||"object"!==fe(o)&&"function"!=typeof o?be(r):o,ye(be(n),"startQuiz",(function(e){e.preventDefault(),(0,n.props.startQuiz)()})),ye(be(n),"isInVisibleRange",(function(e,t){var r=n.props,o=r.currentPage,i=r.questionsPerPage;return o===Math.ceil(t/i)})),n.needToTop=!1,n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(t,e),n=t,(r=[{key:"componentWillReceiveProps",value:function(e){for(var t=["isReviewing","currentPage"],n=0;n<t.length;n++)if(this.props[t[n]]!==e[t[n]])return void(this.needToTop=!0)}},{key:"componentDidUpdate",value:function(){this.needToTop&&(jQuery("#popup-content").animate({scrollTop:0}),this.needToTop=!1)}},{key:"render",value:function(){var e=this,t=this.props,n=t.status,r=t.currentQuestion,o=t.questions,i=t.questionsRendered,u=t.isReviewing,a=t.questionsPerPage,s=!0;return"completed"!==n||u||(s=!1),React.createElement(React.Fragment,null,React.createElement("div",{className:"quiz-questions",style:{display:s?"":"none"}},o.map((function(t,n){var o=!a&&r===t.id,u=i&&-1!==i.indexOf(t.id),s=e.isInVisibleRange(t.id,n+1);return u||!u||s?React.createElement(le,{isCurrent:o,key:"loop-question-".concat(t.id),isShow:s,isShowIndex:!!a&&n+1,questionsPerPage:a,question:t}):""}))))}}])&&pe(n.prototype,r),o&&pe(n,o),t}(i.Component)),ve=Object(u.compose)(Object(a.withSelect)((function(e,t,n){var r=e("learnpress/quiz"),o=r.getData,i=r.getQuestions;return{status:o("status"),currentQuestion:o("currentQuestion"),questions:i(),questionsRendered:o("questionsRendered"),isReviewing:"reviewing"===o("mode"),numPages:o("numPages"),currentPage:o("currentPage"),questionsPerPage:o("questionsPerPage")||1}})),Object(a.withDispatch)((function(e){return{startQuiz:e("learnpress/quiz").startQuiz}})))(ge);function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _e(e,t){return!t||"object"!==Oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function je(e){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pe(e,t){return(Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}lodash.uniqueId;var Re=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),_e(this,je(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}(t,e),n=t,(r=[{key:"getDurationLabel",value:function(e){if(!e.expirationTime)return Object(O.__)("Unlimited","learnpress");var t=LP.singleCourse.formatDuration,n=new Date(e.expirationTime).getTime()-new Date(e.startTime).getTime();return n?t(n/1e3):""}},{key:"getTimeSpendLabel",value:function(e){var t=LP.singleCourse.formatDuration,n=new Date(e.endTime).getTime()-new Date(e.startTime).getTime();return n?t(n/1e3):""}},{key:"render",value:function(){var e=this,t=this.props.attempts,n=t&&!!t.length;return!!n&&React.createElement(React.Fragment,null,React.createElement("div",{className:"quiz-attempts"},React.createElement("h4",{className:"attempts-heading"},Object(O.__)("Last Attempted","learnpress")),n&&React.createElement("table",null,React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,Object(O.__)("Date","learnpress")),React.createElement("th",null,Object(O.__)("Questions","learnpress")),React.createElement("th",null,Object(O.__)("Spend","learnpress")),React.createElement("th",null,Object(O.__)("Marks","learnpress")),React.createElement("th",null,Object(O.__)("Passing Grade","learnpress")),React.createElement("th",null,Object(O.__)("Result","learnpress")))),React.createElement("tbody",null,t.map((function(t){return React.createElement("tr",{key:"attempt-".concat(t.id)},React.createElement("td",null,t.startTime),React.createElement("td",null,t.questionCorrect," / ",t.questionCount),React.createElement("td",null,e.getTimeSpendLabel(t)," / ",e.getDurationLabel(t)),React.createElement("td",null,t.userMark," / ",t.mark),React.createElement("td",null,t.passingGrade||Object(O._x)("-","unknown passing grade value","learnpress")),React.createElement("td",null,parseFloat(t.result).toFixed(2),"% ",React.createElement("label",null,t.gradeText)))}))))))}}])&&we(n.prototype,r),o&&we(n,o),t}(i.Component),Ee=Object(u.compose)([Object(a.withSelect)((function(e){var t=e("learnpress/quiz").getData,n=t("attempts[0]");return{id:t("id"),attempts:n?[n]:[],attemptsCount:t("attemptsCount"),status:t("status"),questionIds:t("questionIds"),questionNav:t("questionNav"),currentQuestion:t("currentQuestion")}})),Object(a.withDispatch)((function(e,t){var n=t.id,r=e("learnpress/quiz"),o=r.startQuiz,i=r.setCurrentQuestion,u=r.submitQuiz;return{startQuiz:o,setCurrentQuestion:i,submitQuiz:function(){u(n)}}}))])(Re);function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qe(e){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ze(e,t){return(ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}React.useState;var Ce=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=Qe(t).apply(this,arguments),n=!o||"object"!==Se(o)&&"function"!=typeof o?ke(r):o,Te(ke(n),"init",(function(e){var t=e.endTime,r=e.totalTime,o=new Date(t),i=new Date,u=(new Date).getTimezoneOffset(),a=parseInt(o.getTime()/1e3-(i.getTime()/1e3+60*u));n.state={seconds:a,totalTime:r,remainingSeconds:a>0?a:0,currentTime:parseInt((new Date).getTime()/1e3),percent:100}})),Te(ke(n),"submit",(function(){(0,n.props.submitQuiz)()})),Te(ke(n),"formatTime",(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:":",r=n.state,o=r.remainingSeconds,i=r.totalTime,u=[];return i<3600?(u.push((o-o%60)/60),u.push(o%60)):i&&(u.push((o-o%3600)/3600),e=o%3600,u.push((e-e%60)/60),u.push(e%60)),u.map((function(e){return e<10?"0".concat(e):e})).join(t)})),Te(ke(n),"getCircle",(function(){var e=n.state.percent,t=36*Math.PI,r=t-e/100*t,o={strokeDasharray:"".concat(t," ").concat(t),strokeDashoffset:r},i=["clock"];return e<=5&&i.push("x"),React.createElement("div",{className:i.join(" ")},React.createElement("svg",{className:"circle-progress-bar",width:40,height:40},React.createElement("circle",{className:"circle-progress-bar__circle",strokeWidth:4,style:o,fill:"transparent",r:18,cx:20,cy:20})))})),n.init(e),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ze(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;this.myInterval=setInterval((function(){var t=e.state,n=(t.seconds,t.currentTime,t.totalTime),r=e.state.remainingSeconds;(r-=1)>0&&e.setState((function(e){return e.seconds,{remainingSeconds:r,percent:r/n*100}})),r<=0&&(clearInterval(e.myInterval),e.submit())}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.myInterval)}},{key:"render",value:function(){return this.props.content,React.createElement("div",{className:"countdown"},React.createElement("span",null,this.formatTime()),this.getCircle())}}])&&qe(n.prototype,r),o&&qe(n,o),t}(i.Component),De=Object(u.compose)([Object(a.withSelect)((function(e){var t=e("learnpress/quiz").getData;return{submitting:t("submitting"),totalTime:t("totalTime")?t("totalTime"):t("duration"),endTime:t("endTime")}})),Object(a.withDispatch)((function(e){var t=e("learnpress/quiz");return{setQuizData:t.setQuizData,submitQuiz:t.submitQuiz}}))])(Ce);function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xe(e){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Le=lodash,Fe=(Le.get,Le.debounce),He=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,e=!(r=xe(t).apply(this,arguments))||"object"!==Ie(r)&&"function"!=typeof r?Ae(n):r,Ue(Ae(e),"getResultMessage",(function(e){return Object(O.sprintf)(Object(O.__)("Your grade is <strong>%s</strong>","learnpress"),e.gradeText)})),Ue(Ae(e),"getResultPercentage",(function(e){return 100===e.result?e.result:parseFloat(e.result).toFixed(2)})),e.state={percentage:0,done:!1},e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.animate()}},{key:"componentWillReceiveProps",value:function(e,t){e.results.result!==t.results.result&&this.animate()}},{key:"animate",value:function(){var e=this,t=this.props.results;this.setState({percentage:0,done:!1}),jQuery.easing._customEasing=function(e,t,n,r,o){return r*Math.sqrt(1-(t=t/o-1)*t)+n},Fe((function(){var n=jQuery("<span />").css({width:1,height:1}).appendTo(document.body);n.css("left",0).animate({left:t.result},{duration:1500,step:function(t,n){e.setState({percentage:t})},done:function(){e.setState({done:!0}),n.remove(),jQuery("#quizResultGrade").css({transform:"scale(1.3)",transition:"all 0.25s"}),Fe((function(){jQuery("#quizResultGrade").css({transform:"scale(1)"})}),500)()},easing:"_customEasing"})}),1e3)()}},{key:"render",value:function(){var e=this.props.results,t=this.state,n=t.percentage,r=t.done;n<100&&(n=parseFloat(n).toFixed(2));var o=["quiz-result",e.grade],i=(this.getResultPercentage(e),190*Math.PI),u=i-n/100*i,a={strokeDasharray:"".concat(i," ").concat(i),strokeDashoffset:u};return React.createElement("div",{className:o.join(" ")},React.createElement("h3",{className:"result-heading"},Object(O.__)("Your Result","learnpress")),React.createElement("div",{id:"quizResultGrade",className:"result-grade"},React.createElement("svg",{className:"circle-progress-bar",width:200,height:200},React.createElement("circle",{className:"circle-progress-bar__circle",stroke:"",strokeWidth:10,style:a,fill:"transparent",r:95,cx:100,cy:100})),React.createElement("span",{className:"result-achieved"},n,"%"),React.createElement("span",{className:"result-require"},void 0!==e.passingGrade?e.passingGrade:Object(O._x)("-","unknown passing grade value","learnpress")),r&&React.createElement("p",{className:"result-message",dangerouslySetInnerHTML:{__html:this.getResultMessage(e)}})),React.createElement("ul",{className:"result-statistic"},React.createElement("li",{className:"result-statistic-field"},React.createElement("label",null,Object(O.__)("Time spend","learnpress")),React.createElement("p",null,e.timeSpend)),React.createElement("li",{className:"result-statistic-field"},React.createElement("label",null,Object(O.__)("Point","learnpress")),React.createElement("p",null,e.userMark," / ",e.mark)),React.createElement("li",{className:"result-statistic-field"},React.createElement("label",null,Object(O.__)("Questions","learnpress")),React.createElement("p",null,e.questionCount)),React.createElement("li",{className:"result-statistic-field"},React.createElement("label",null,Object(O.__)("Correct","learnpress")),React.createElement("p",null,e.questionCorrect)),React.createElement("li",{className:"result-statistic-field"},React.createElement("label",null,Object(O.__)("Wrong","learnpress")),React.createElement("p",null,e.questionWrong)),React.createElement("li",{className:"result-statistic-field"},React.createElement("label",null,Object(O.__)("Skipped","learnpress")),React.createElement("p",null,e.questionEmpty))))}}])&&Ne(n.prototype,r),o&&Ne(n,o),t}(i.Component),Be=Object(u.compose)([Object(a.withSelect)((function(e){return{results:(0,e("learnpress/quiz").getData)("results")}})),Object(a.withDispatch)((function(e){var t=e("learnpress/quiz");return{setQuizData:t.setQuizData,startQuiz:t.startQuiz}}))])(He);function We(e){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Je(e){return(Je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(e,t){return(Ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ve=jQuery,Ye=lodash.debounce,Xe=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=Je(t).apply(this,arguments),e=!r||"object"!==We(r)&&"function"!=typeof r?Ge(n):r,$e(Ge(e),"submit",(function(){var t=Object(a.select)("learnpress/modal").confirm,n=Object(a.select)("learnpress/quiz").getData("title");"no"!==t(Object(O.sprintf)(Object(O.__)("<p>Are you sure to submit quiz:</p><strong>%s</strong>?","learnpress"),n),e.submit)&&(0,e.props.submitQuiz)()})),$e(Ge(e),"getMark",(function(){var e=Object(a.select)("learnpress/quiz").getData("answered");return Object.values(e).reduce((function(e,t){return e+t.mark}),0)})),e.state={submitting:!1},e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ke(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=Ve("#popup-content"),t=e.find(".content-item-scrollable:eq(1)"),n=e.find(".content-item-wrap"),r=e.find(".quiz-status"),o=r.offset().top-92,i=!1,u="-"+n.css("margin-left");Ve(window).on("resize.refresh-quiz-stauts-bar",Ye((function(){u="-"+n.css("margin-left"),r.css({"margin-left":u,"margin-right":u})}),100)).trigger("resize.refresh-quiz-stauts-bar"),t.scroll((function(){if(t.scrollTop()>=o){if(i)return;i=!0}else{if(!i)return;i=!1}i?e.addClass("fixed-quiz-status"):e.removeClass("fixed-quiz-status")}))}},{key:"render",value:function(){var e=this.props,t=e.currentPage,n=e.questionsPerPage,r=e.questionsCount,o=e.submitting,i=e.totalTime,u=e.duration,a=e.userMark,s=["quiz-status"],c=(t-1)*n+1,l=c+n-1;return l=Math.min(l,r),o&&s.push("submitting"),React.createElement("div",{className:s.join(" ")},React.createElement("div",null,React.createElement("div",{className:"questions-index"},l<r&&(n>1?Object(O.sprintf)(Object(O.__)("Question %d to %d of %d","learnpress"),c,l,r):Object(O.sprintf)(Object(O.__)("Question %d of %d","learnpress"),c,r)),l===r&&Object(O.sprintf)(Object(O.__)("Question %d to %d","learnpress"),c,l)),React.createElement("div",{className:"current-point"},Object(O.sprintf)(Object(O.__)("Earned Point: %s","learnpress"),a)),React.createElement("div",null,React.createElement("div",{className:"submit-quiz"},React.createElement("button",{className:"lp-button",id:"button-submit-quiz",onClick:this.submit},o?Object(O.__)("Submitting...","learnpress"):Object(O.__)("Submit","learnpress"))),i&&u&&React.createElement(De,null))))}}])&&Ze(n.prototype,r),o&&Ze(n,o),t}(i.Component),et=Object(u.compose)([Object(a.withSelect)((function(e){var t=e("learnpress/quiz"),n=t.getData,r=t.getUserMark;return{currentPage:n("currentPage"),numPages:n("numPages"),questionsPerPage:n("questionsPerPage"),questionsCount:n("questionIds").length,submitting:n("submitting"),totalTime:n("totalTime"),duration:n("duration"),userMark:r()}})),Object(a.withDispatch)((function(e){return{submitQuiz:e("learnpress/quiz").submitQuiz}}))])(Xe);function tt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(n,!0).forEach((function(t){ot(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var it=lodash,ut=(it.omit,it.flow),at=it.isArray,st=it.chunk,ct=(LP.camelCaseDashObjectKeys,{}),lt=function(e,t){var n=rt({},e.answered[t.questionId]||{},{answered:t.answers,temp:!0});return console.log(n,t),rt({},e,{answered:rt({},e.answered,ot({},t.questionId,n))})},ft=function(e,t){var n=e.questionsRendered;return at(n)?(n.push(t.questionId),rt({},e,{questionsRendered:tt(n)})):rt({},e,{questionsRendered:[t.questionId]})},pt=function(e,t){var n=e.questionIds;return rt({},e,{},t,{currentQuestion:!!n&&n[0]})},mt=function(e,t){var n=e.findIndex((function(e){return e.id==t.id}));return-1!==n?e[n]=t:e.unshift(t),e},bt=function(e,t){var n=e.questions.map((function(e){return e.id==t.questionId?rt({},e,{showHint:t.showHint}):e}));return rt({},e,{questions:tt(n)})},dt=function(e,t){var n=e.questions.map((function(e){if(e.id!==t.questionId)return e;var n={explanation:t.explanation};return t.options&&(n.options=t.options),rt({},e,{},n)}));return rt({},e,{questions:tt(n),answered:rt({},e.answered,ot({},t.questionId,t.result)),checkedQuestions:[].concat(tt(e.checkedQuestions),[t.questionId])})},yt=ut(a.combineReducers,(function(e){return function(t,n){return e(t,n)}}),(function(e){return function(t,n){return e(t,n)}}),(function(e){return function(t,n){return e(t,n)}}))({a:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{a:1};arguments.length>1&&arguments[1];return e},b:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{b:2};arguments.length>1&&arguments[1];return e}}),ht=Object(a.combineReducers)({blocks:yt,userQuiz:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_QUIZ_DATA":1>t.data.questionsPerPage&&(t.data.questionsPerPage=1);var n=st(e.questionIds||t.data.questionIds,t.data.questionsPerPage);return t.data.numPages=n.length,t.data.pages=n,rt({},e,{},t.data,{currentPage:LP.localStorage.get("Q".concat(t.data.id,".currentPage"))||t.data.currentPage});case"SUBMIT_QUIZ":return rt({},e,{submitting:!0});case"START_QUIZ":case"START_QUIZ_SUCCESS":return console.log(t.results),pt(e,rt({checkedQuestions:[],hintedQuestions:[],mode:"",currentPage:1},t.results));case"SET_CURRENT_QUESTION":return LP.localStorage.set("Q".concat(e.id,".currentQuestion"),t.questionId),rt({},e,{currentQuestion:t.questionId});case"SET_CURRENT_PAGE":return LP.localStorage.set("Q".concat(e.id,".currentPage"),t.currentPage),rt({},e,{currentPage:t.currentPage});case"SUBMIT_QUIZ_SUCCESS":return pt(e,rt({attempts:mt(e.attempts,t.results),submitting:!1,currentPage:1},t.results));case"UPDATE_USER_QUESTION_ANSWERS":return"started"===e.status?lt(e,t):e;case"MARK_QUESTION_RENDERED":return ft(e,t);case"SET_QUIZ_MODE":return"reviewing"==t.mode?pt(e,{mode:t.mode}):rt({},e,{mode:t.mode});case"SET_QUESTION_HINT":return bt(e,t);case"CHECK_ANSWER":return dt(e,t)}return e}}),gt=n(4);function vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ot=regeneratorRuntime.mark(It),wt=regeneratorRuntime.mark(At),_t=regeneratorRuntime.mark(Ut);function jt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pt=LP,Rt=Pt.camelCaseDashObjectKeys,Et=Pt.Hook;function St(e,t){return t="string"==typeof e?jt({},e,t):e,{type:"SET_QUIZ_DATA",data:Rt(t)}}function qt(e){return{type:"SET_CURRENT_QUESTION",questionId:e}}function Qt(e){return{type:"SET_CURRENT_PAGE",currentPage:e}}function kt(e,t,n){return{type:"BEFORE_START_QUIZ"}}function zt(e,t,n,r){return Et.doAction("quiz-started",e,t,n,r),{type:"START_QUIZ_SUCCESS",quizId:t,courseId:n,userId:r,results:e}}var Tt=regeneratorRuntime.mark((function e(){var t,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object(a.select)("learnpress/quiz").getDefaultRestArgs(),n=t.itemId,r=t.courseId,!0===Et.applyFilters("before-start-quiz",!0,n,r)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Object(gt.apiFetch)({path:"lp/v1/users/start-quiz",method:"POST",data:{item_id:n,course_id:r}});case 6:return o=e.sent,o=Et.applyFilters("request-start-quiz-response",o,n,r),e.next=10,Object(gt.dispatch)("learnpress/quiz","__requestStartQuizSuccess",Rt(o.results),n,r);case 10:case"end":return e.stop()}}),e)}));function Ct(){return{type:"SUBMIT_QUIZ"}}function Dt(e,t,n){return Et.doAction("quiz-submitted",e,t,n),{type:"SUBMIT_QUIZ_SUCCESS",results:e}}function It(){var e,t,n,r,o,i,u,s;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(e=Object(a.select)("learnpress/quiz"),t=e.getDefaultRestArgs,n=e.getQuestionsSelectedAnswers,r=t(),o=r.itemId,i=r.courseId,!0===Et.applyFilters("before-submit-quiz",!0)){c.next=5;break}return c.abrupt("return");case 5:return u=n(),c.next=8,Object(gt.apiFetch)({path:"lp/v1/users/submit-quiz",method:"POST",data:{item_id:o,course_id:i,answered:u}});case 8:if(s=c.sent,!(s=Et.applyFilters("request-submit-quiz-response",s,o,i)).success){c.next=13;break}return c.next=13,Object(gt.dispatch)("learnpress/quiz","__requestSubmitQuizSuccess",Rt(s.results),o,i);case 13:case"end":return c.stop()}}),Ot)}function Nt(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];return{type:"UPDATE_USER_QUESTION_ANSWERS",questionId:e,answers:t}}function xt(e,t){return{type:"SET_QUESTION_HINT",questionId:e,showHint:t}}function At(e,t){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(gt.dispatch)("learnpress/quiz","__requestShowHintSuccess",e,t);case 2:case"end":return n.stop()}}),wt)}function Mt(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vt(n,!0).forEach((function(t){jt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"CHECK_ANSWER",questionId:e},t)}function Ut(e){var t,n,r,o,i,u,s;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return console.time("checkAnswer"),t=Object(a.select)("learnpress/quiz"),n=t.getDefaultRestArgs,r=t.getQuestionAnswered,o=n(),i=o.itemId,u=o.courseId,c.next=5,Object(gt.apiFetch)({path:"lp/v1/users/check-answer",method:"POST",data:{item_id:i,course_id:u,question_id:e,answered:r(e)||""}});case 5:return s=c.sent,c.next=8,Object(gt.dispatch)("learnpress/quiz","__requestCheckAnswerSuccess",e,Rt(s));case 8:console.timeEnd("checkAnswer");case 9:case"end":return c.stop()}}),_t)}function Lt(e){return{type:"MARK_QUESTION_RENDERED",questionId:e}}function Ft(e){return{type:"SET_QUIZ_MODE",mode:e}}var Ht=lodash,Bt=Ht.get,Wt=Ht.isArray,Zt=function(e,t){console.time("parseOptions");var n=nn(e,t).options;return n=Wt(n)?n:JSON.parse(CryptoJS.AES.decrypt(n.data,n.key,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),n=Wt(n)?n:JSON.parse(n),console.timeEnd("parseOptions"),n};function Jt(e,t){var n=Object(a.select)("course-learner/user").getItemById(t);return n?Bt(n,"userSettings.status"):""}function Gt(e,t,n){return e[t]||n}function Kt(e,t){var n=Object(a.select)("course-learner/user").getItemById(t);return n?Bt(n,"userSettings.attempts"):[]}function $t(e,t){var n=Object(a.select)("course-learner/user").getItemById(t);return n?Bt(n,"userSettings.answered",{}):{}}function Vt(e){var t=e.userQuiz,n=Bt(t,"questions");return n?Object.values(n):[]}function Yt(e,t){var n=e.userQuiz;return t?Bt(n,t):n}function Xt(e){var t=e.userQuiz;return{itemId:t.id,courseId:t.courseId}}function en(e,t){var n=e.userQuiz;return Bt(n,"answered.".concat(t,".answered"))||void 0}function tn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if((Bt(e,"userQuiz.questionsPerPage")||1)>1)return!1;var n=Bt(e,"userQuiz.currentPage")||1;return Bt(e,"object"===t?"userQuiz.questions[".concat(n-1,"]"):"userQuiz.questionIds[".concat(n-1,"]"))}var nn=function(e,t){e.userQuiz;return Object(a.select)("learnpress/quiz").getQuestions().find((function(e){return e.id==t}))};function rn(e,t){return-1!==(Bt(e,"userQuiz.checkedQuestions")||[]).indexOf(t)}function on(e,t){}var un=function(e,t){var n=Bt(e,"userQuiz.answered"),r={};for(var o in n)if(n.hasOwnProperty(o)&&n[o].temp){if(t&&o===t)return n[o].answered;r[o]=n[o].answered}return r};function an(e){var t=e.userQuiz||{},n=t.answered,r=t.negativeMarking,o=t.questions,i=t.checkedQuestions,u=0,a=function(e){if(!n.hasOwnProperty(e))return s=e,"continue";e=parseInt(e);var t,a=n[e],c=a.questionMark?a.questionMark:(t=o.find((function(t){return s=e,t.id===e})),s=e,t?t.point:0);i.indexOf(e);if(a.temp)return s=e,"continue";r?a.answered&&(u=a.correct?u+a.mark:u-c):a.answered&&a.correct&&(u+=a.mark),s=e};for(var s in n)a(s);return u>0?u:0}var sn=n(5),cn=n.n(sn),ln={ENROLL_COURSE_X:function(e,t){}};var fn=function(e){var t=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},n={getState:e.getState,dispatch:function(){return t.apply(void 0,arguments)}};return t=cn()(ln)(n)(e.dispatch),e.dispatch=t,e};function pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bn=LP.dataControls.controls,dn=Object(a.registerStore)("learnpress/quiz",{reducer:ht,selectors:o,actions:r,controls:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pn(n,!0).forEach((function(t){mn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},bn)});fn(dn);function yn(e){return(yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gn(e){return(gn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function On(e,t){return(On=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var wn=lodash,_n=wn.chunk,jn=(wn.isNumber,jQuery,function(e){function t(e){var n,r,o,i,u,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=gn(t).apply(this,arguments),n=!o||"object"!==yn(o)&&"function"!=typeof o?vn(r):o,i=vn(n),a=function(e){n.props.startQuiz()},(u="startQuiz")in i?Object.defineProperty(i,u,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[u]=a,n.state={currentPage:1,numPages:0,pages:[]},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&On(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){console.time("Quiz.componentDidMount");var e=this.props,t=e.settings,n=e.setQuizData,r=t.question_ids,o=t.questions_per_page,i=_n(r,o);t.currentPage=1,t.numPages=i.length,t.pages=i,console.timeEnd("Quiz.componentDidMount"),n(t),console.log(wp.data.select("learnpress/quiz").getData())}},{key:"componentWillReceiveProps",value:function(e){console.time("QUIZ");var t=e.questionIds,n=e.questionsPerPage;e.setQuizData,_n(t,n)}},{key:"componentDidUpdate",value:function(){console.timeEnd("QUIZ")}},{key:"render",value:function(){var e=this.props,t=e.status,n=e.isReviewing,r=-1!==["","completed"].indexOf(t);return void 0!==t&&React.createElement(React.Fragment,null,!n&&"completed"===t&&React.createElement(Be,null),!n&&!t&&React.createElement(q,null),!n&&r&&React.createElement(v,null),"started"===t&&React.createElement(et,null),(-1!==["completed","started"].indexOf(t)||n)&&React.createElement(ve,null),React.createElement(V,null),r&&!n&&React.createElement(Ee,null))}}])&&hn(n.prototype,r),o&&hn(n,o),t}(i.Component)),Pn=Object(u.compose)([Object(a.withSelect)((function(e){var t=e("learnpress/quiz"),n=t.getQuestions,r=t.getData;return{questions:n(),status:r("status"),store:r(),answered:r("answered"),isReviewing:"reviewing"===r("mode"),questionIds:r("questionIds"),checkCount:r("instantCheck"),questionsPerPage:r("questionsPerPage")||1}})),Object(a.withDispatch)((function(e){var t=e("learnpress/quiz");return{setQuizData:t.setQuizData,startQuiz:t.startQuiz}}))])(jn);n.d(t,"init",(function(){return En}));var Rn=LP.modal.default,En=(t.default=Pn,function(e,t){wp.element.render(React.createElement(Rn,null,React.createElement(Pn,{settings:t})),jQuery(e)[0])})}]);