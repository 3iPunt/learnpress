!function(e){var t={};function r(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(a,i,function(t){return e[t]}.bind(null,i));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=29)}({29:function(e,t){!function(e){"use strict";var t=function e(t){this.view=new e.View({model:new e.Model(t)})};t.View=Backbone.View.extend({events:{"click #lp-remove-upload-photo":"_removePhoto","click #lp-upload-photo":"_upload","click .lp-cancel-upload":"_cancel","click .lp-save-upload":"_save"},el:"#lp-user-edit-avatar",uploader:null,initialize:function(){_.bindAll(this,"filesAdded","uploadProgress","uploadError","fileUploaded","crop"),this._getUploader()},_save:function(t){t.preventDefault();var r=this;e.ajax({url:"?lp-ajax=save-uploaded-user-avatar",data:this.$(".lp-avatar-crop-image").serializeJSON(),type:"post",success:function(t){(t=LP.parseJSON(t)).success&&(r.$(".lp-avatar-crop-image").remove(),e(".lp-user-profile-avatar").html(t.avatar),r.$().attr("data-custom","yes"),r.$(".profile-picture").toggleClass("profile-avatar-current").filter(".profile-avatar-current").html(t.avatar))}})},$:function(t){return t?e(this.$el).find(t):e(this.$el)},_removePhoto:function(t){t.preventDefault(),confirm("Are you sure?")&&(this.$().removeAttr("data-custom"),this.$(".profile-picture").toggleClass("profile-avatar-current"),this.$("#submit").prop("disabled",!1),e(".lp-user-profile-avatar").html(this.$(".profile-avatar-current").find("img").clone()))},_upload:function(e){e.preventDefault()},_cancel:function(e){e.preventDefault(),this.$crop&&this.$crop.remove(),this.$(".lp-avatar-preview").removeClass("croping")},filesAdded:function(e,t){e.files.splice(0,e.files.length-1),this.$(".lp-avatar-preview").addClass("uploading"),this.$(".lp-avatar-upload-progress-value").width(0),this.uploader.start()},uploadProgress:function(e,t){this.$(".lp-avatar-upload-progress-value").css("width",t.percent+"%")},uploadError:function(e,t){this.$(".lp-avatar-preview").addClass("upload-error").removeClass("uploading"),this.$(".lp-avatar-upload-error").html(t)},fileUploaded:function(t,r,a){this.$(".lp-avatar-preview").removeClass("upload-error").removeClass("uploading");var i=this,o=LP.parseJSON(a.response);o.url&&(this.avatar=o.url,e("<img/>").attr("src",o.url).load((function(){i.model.set(e.extend(o,{width:this.width,height:this.height})),i.crop()})))},crop:function(){this.model.set("r",Math.random()),new t.Crop(this),this.$("#submit").prop("disabled",!1)},_getUploader:function(){return this.uploader||(this.uploader=new plupload.Uploader({runtimes:"html5,flash,silverlight,html4",browse_button:"lp-upload-photo",container:e("#lp-user-edit-avatar").get(0),url:("undefined"!=typeof lpGlobalSettings?lpGlobalSettings.ajax:"").addQueryVar("action","learnpress_upload-user-avatar"),filters:{max_file_size:"10mb",mime_types:[{title:"Image",extensions:"png,jpg,bmp,gif"}]},file_data_name:"lp-upload-avatar",init:{PostInit:function(){},FilesAdded:this.filesAdded,UploadProgress:this.uploadProgress,FileUploaded:this.fileUploaded,Error:this.uploadError}}),this.uploader.init()),this.uploader}}),t.Model=Backbone.Model.extend({}),t.Crop=function(t){var r=this,a=t.model.toJSON(),i=e(LP.template("tmpl-crop-user-avatar")(a));i.appendTo(t.$("#profile-avatar-uploader")),t.$crop=i;var o=i.find("img"),n=0,s=0,l=0,d=0,p=0,u=0;this.initCrop=function(){a.viewWidth/a.viewHeight>=a.width/a.height?(n=a.viewWidth,s=a.height*a.viewWidth/a.width,l=0,d=-(s-a.viewHeight)/2):(s=a.viewHeight,n=a.width*a.viewHeight/a.height,d=0,l=-(n-a.viewWidth)/2),p=n,u=s,o.draggable({drag:function(t,r){r.position.left>0&&(r.position.left=0),r.position.top>0&&(r.position.top=0);var i=a.viewWidth-p,o=a.viewHeight-u;i>r.position.left&&(r.position.left=i),o>r.position.top&&(r.position.top=o),e(document.body).addClass("profile-dragging")},stop:function(i,n){l=parseInt(o.css("left")),d=parseInt(o.css("top")),t=(Math.abs(l)+a.viewWidth/2)/p,c=(Math.abs(d)+a.viewHeight/2)/u,r.update({width:p,height:u,top:d,left:l}),e(document.body).removeClass("profile-dragging")}});var t=(Math.abs(l)+a.viewWidth/2)/n,c=(Math.abs(d)+a.viewHeight/2)/s;i.find(".lp-zoom > div").slider({create:function(){r.update({width:n,height:s,top:d,left:l})},slide:function(i,o){p=n+o.value/100*a.width*2,u=s+o.value/100*a.height*2;var f=a.viewWidth/2-p*t,h=a.viewHeight/2-u*c;f>0&&(f=0),h>0&&(h=0);var v=parseInt(a.viewWidth-p),g=parseInt(a.viewHeight-u);v>f&&(f=l=v),g>h&&(h=d=g),r.update({width:p,height:u,top:h,left:f}),e(document.body).addClass("profile-resizing"),console.log(o.value,a)},stop:function(){e(document.body).removeClass("profile-resizing")}})},this.update=function(t){o.css({width:t.width,height:t.height,top:t.top,left:t.left});var r=t.width/a.width,n=parseInt(Math.abs(t.left/r)),s=parseInt(Math.abs(t.top/r)),l=n+parseInt(a.viewWidth/r),d=s+parseInt(a.viewHeight/r),p=e.extend(t,{width:a.viewWidth,height:a.viewHeight,r:r,points:[n,s,l,d].join(",")});i.find('input[name^="lp-user-avatar-crop"]').each((function(){var t=e(this),r=t.data("name");"name"!=r&&void 0!==p[r]&&t.val(p[r])}))},this.initCrop()},e(document).on("submit","#learn-press-form-login",(function(t){var r=e(this),a=r.serialize();return r.find(".learn-press-error, .learn-press-notice, .learn-press-message").fadeOut(),r.find("input").attr("disabled",!0),LP.doAjax({data:{"lp-ajax":"login",data:a},success:function(t,a){LP.showMessages(t.message,r,"LOGIN_ERROR"),"error"==t.result&&(r.find("input").attr("disabled",!1),e('#learn-press-form-login input[type="text"]').trigger("focus")),t.redirect&&LP.reload(t.redirect)},error:function(){LP.showMessages("",r,"LOGIN_ERROR"),r.find("input").attr("disabled",!1),e('#learn-press-form-login input[type="text"]').trigger("focus")}}),!1})),e(document).on("click",".table-orders .cancel-order",(function(t){t.preventDefault();var r=e(this).attr("href");return LP.alert(learn_press_js_localize.confirm_cancel_order,(function(e){e&&(window.location.href=r)})),!1})),e(document).ready((function(){var a=e("#lp-user-profile-form form"),i=a.serialize(),o=null,n=a.find("#lp-profile-edit-password-form");function s(){a.find("#submit").prop("disabled",!(a.serialize()!=i))}0==n.length?a.on("keyup change","input, textarea, select",(function(){o&&clearTimeout(o),o=setTimeout(s,300)})):n.on("change keyup","input",(function(t){e(t.target).attr("name");var r=a.find("#pass0"),i=a.find("#pass1"),o=a.find("#pass2"),n=!((i.val()||o.val())&&i.val()!=o.val());a.find("#lp-password-not-match").toggleClass("hide-if-js",n),a.find("#submit").prop("disabled",!(n&&r.val()&&i.val()&&o.val()))}));var l={};"undefined"!=typeof lpProfileUserSettings&&(l.viewWidth=parseInt(lpProfileUserSettings.avatar_size.width),l.viewHeight=parseInt(lpProfileUserSettings.avatar_size.height)),new t(l),r.recoverOrder()})).on("click",".btn-load-more-courses",(function(t){var r=e(this),a=r.data("paged")||1,i=r.data("pages")||1,o=r.data("container"),n=e("#"+o),s=r.data("url");if(a++,r.data("paged",a).prop("disabled",!0).removeClass("btn-ajax-off").addClass("btn-ajax-on"),s)s=s.addQueryVar("current_page",a);else{var l=window.location.href.split("?");s=l[0].match(/\/([0-9]+)\//)?l[0].replace(/\/([0-9]+)\//,a):l[0]+a,l[1]&&(s+="?"+l[1])}e.ajax({url:s,data:r.data("args"),success:function(t){n.append(e(t).find("#"+o).children()),a>=i?r.remove():r.prop("disabled",!1).removeClass("btn-ajax-on").addClass("btn-ajax-off")}})}));var r={recoverOrder:function(t){var r=e(".order-recover"),a=r.find(".button-recover-order"),i=(r.find('input[name="order-key"]'),function(){r.find(".learn-press-message").remove(),e(".profile-recover-order").find(".learn-press-message").remove(),e.post({url:"",data:r.serializeJSON(),beforeSend:function(){a.addClass("loading").attr("disabled","disabled")},success:function(t){if((t=LP.parseJSON(t)).message){var i=e('<div class="learn-press-message icon"><i class="fa"></i> '+t.message+"</div>");"error"==t.result&&i.addClass("error"),r.before(i)}t.redirect&&(window.location.href=t.redirect),a.removeClass("loading").removeAttr("disabled","")},error:function(){a.removeClass("loading").removeAttr("disabled","")}})});a.on("click",i)}}}(jQuery)}});