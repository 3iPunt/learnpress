!function(o){o.backward_timer=function(t){var e={seconds:5,step:1,format:"h%:m%:s%",value_setter:void 0,on_exhausted:function(t){},on_tick:function(t){}},n=this;n.seconds_left=0,n.target=o(t),n.timeout=void 0,n.settings={},n.methods={init:function(t){n.settings=o.extend({},e,t),null==n.settings.value_setter&&(n.target.is("input")?n.settings.value_setter="val":n.settings.value_setter="text"),n.methods.reset()},start:function(){var t;null==n.timeout&&(t=n.seconds_left==n.settings.seconds?0:1e3*n.settings.step,setTimeout(n.methods._on_tick,t,t))},cancel:function(){null!=n.timeout&&(clearTimeout(n.timeout),n.timeout=void 0)},reset:function(){n.seconds_left=n.settings.seconds,n.methods._render_seconds()},_on_tick:function(t){var e,s;0!=t&&n.settings.on_tick(n),n.methods._render_seconds(),0<n.seconds_left?(e=n.seconds_left<n.settings.step?n.seconds_left:n.settings.step,n.seconds_left-=e,s=1e3*e,n.timeout=setTimeout(n.methods._on_tick,s,s)):(n.timeout=void 0,n.settings.on_exhausted(n))},_render_seconds:function(){var t=n.methods._seconds_to_dhms(n.seconds_left),e=n.settings.format;e=(e=-1!==e.indexOf("d%")?e.replace("d%",t.d).replace("h%",n.methods._check_leading_zero(t.h)):e.replace("h%",24*t.d+t.h)).replace("m%",n.methods._check_leading_zero(t.m)).replace("s%",n.methods._check_leading_zero(t.s)),n.target[n.settings.value_setter](e)},_seconds_to_dhms:function(t){var e=Math.floor(t/86400),t=t-24*e*3600,s=Math.floor(t/3600),t=t-3600*s,n=Math.floor(t/60);return{d:e,h:s,m:n,s:Math.floor(t-60*n)}},_check_leading_zero:function(t){return t<10?"0"+t:""+t}}},o.fn.backward_timer=function(e){var s=arguments;return this.each(function(){var t=o(this).data("backward_timer");return null==t&&(t=new o.backward_timer(this),o(this).data("backward_timer",t)),t.methods[e]?t.methods[e].apply(this,Array.prototype.slice.call(s,1)):"object"!=typeof e&&e?void o.error("Method "+e+" does not exist on jQuery.backward_timer"):t.methods.init.apply(this,s)})}}(jQuery);